<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Argus Initiator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- CSS -->
    <!--<link rel='stylesheet' href='http://fonts.googleapis.com/css?family=PT+Sans:400,700'>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/supersized.css">
    <link rel="stylesheet" href="../css/style.css">-->
    <link rel="stylesheet" href="../css/inistyle.css">
    <script src="../js/jquery-1.8.2.min.js"></script>
    <script src="../js/jquery.cookie.js"></script>

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

</head>

<body>

<div class="page-container">
</br>
    </br>
    <ul>
        <li><a href="http://localhost:8080/initiatorHome">Home</a></li>
        <li><a href="http://localhost:8080/initiator/message">Message</a></li>
        <li style="float:right"><a href="http://localhost:8080">Log out</a></li>
        <li style="float:right" id="user"><a>Welcome!</a></li>
    </ul>
    <p id="username" style="text-align:center;"></p>
        <p id="pts" style="text-align:center;"></p>
        <p id="tasknum" style="text-align:center;"></p>
        <p id="taskfn" style="text-align:center;"></p>
        <p id="taskon" style="text-align:center;"></p>
        <p id="ptscost" style="text-align:center;"></p>
</div>
<script>
    var name=$.cookie("username");

    var userData = null

    $.ajax({
        url: 'http://localhost:8080/getInitiatorInfo',
        type: 'post',
        async: false,
        data: {
            username:name
        },
        success: function (data) {
            userData = data
        },
        error: function() {
            alert('fail')
        }
    })

    var userObj = JSON.parse(userData)

    var pts0=userObj.credit;
    var num0=userObj.tasknum;
    var num1=userObj.taskfn;
    var num2=userObj.taskog;
    var pts1=userObj.creditcost;

    //document.getElementById('username').innerHTML="当前用户："+username;
    document.getElementById('pts').innerHTML="剩余积分："+pts0;
    document.getElementById('tasknum').innerHTML="发布任务总数："+num0;
    document.getElementById('taskfn').innerHTML="已完成任务数："+num1;
    document.getElementById('taskon').innerHTML="进行中任务数："+num2;
    document.getElementById('ptscost').innerHTML="花费积分数："+pts1;

</script>
</body>
</html>